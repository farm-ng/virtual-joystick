RelativeLayout:
    Button:
        id: back_btn_layout
        pos_hint: {"x": 0.0, "top": 1.0}
        background_color: 0, 0, 0, 0
        size_hint: 0.1, 0.1
        background_normal: "assets/back_button.png"
        on_release: app.on_exit_btn()
        Image:
            source: "assets/back_button_normal.png" if self.parent.state == "normal" else "assets/back_button_down.png"
            pos: self.parent.pos
            size: self.parent.size
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            size_hint_x: 0.3
            orientation: 'vertical'
            Widget:
                size_hint_y: 2.0
            Label:
                text: "Amiga State:"
                font_size: 18
                size_hint_y: 0.5
            Label:
                text: app.amiga_state
                font_size: 18
            Widget: # Empty placeholder
            Label:
                text: "Speed [m/s]:"
                font_size: 18
                size_hint_y: 0.5
            Label:
                text: app.amiga_speed
                font_size: 18
            Widget: # Empty placeholder
            Label:
                text: "Angular Rate [rad/s]:"
                font_size: 18
                size_hint_y: 0.5
            Label:
                text: app.amiga_rate
                font_size: 18
            Widget:
                size_hint_y: 2.0
        VirtualJoystickWidget:
            id: joystick
        TabbedPanel:
            do_default_tab: False
            TabbedPanelItem:
                text: "Rgb"
                Image:
                    id: rgb
            TabbedPanelItem:
                text: "Disparity"
                Image:
                    id: disparity
            TabbedPanelItem:
                text: "Left"
                Image:
                    id: left
            TabbedPanelItem:
                text: "Right"
                Image:
                    id: right

<VirtualJoystickWidget@Widget>:
    joystick_diameter: 200
    joystick_position_x: 0
    joystick_position_y: 0
    canvas:
        Color:
            rgba: 0.2, 0.2, 0.2, 1.0
        Ellipse:
            id: background_ellipse
            pos: root.center_x - root.width // 2, root.center_y - root.height // 2
            size: root.width, root.height
        Color:
            rgba: 1.0, 1.0, 0.0, 1.0
        Ellipse:
            id: joystick
            pos: root.joystick_position_x, root.joystick_position_y
            size: root.joystick_diameter, root.joystick_diameter